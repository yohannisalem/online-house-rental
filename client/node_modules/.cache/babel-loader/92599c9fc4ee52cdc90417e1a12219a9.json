{"ast":null,"code":"var _jsxFileName = \"/home/yohannis/Desktop/Final-Project OHR/client/src/components/screen/EditHouse.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { TextArea, Progress, Form, Grid, Input, Segment } from 'semantic-ui-react';\nimport storage from '../../firebase';\nimport axios from 'axios';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditHouse = ({\n  house\n}) => {\n  _s();\n\n  const history = useHistory();\n  let params = useParams();\n  const [housename, setHousename] = useState('');\n  const [description, setDescription] = useState('');\n  const [numberofbeds, setNumberOfBeds] = useState(0);\n  const [district, setDistrict] = useState('');\n  const [sefer, setSefer] = useState('');\n  const [feepermonth, setFeeperMonth] = useState(0);\n  const [size, setSize] = useState(0);\n  const [available, setAvailable] = useState(false);\n  const [propertytype, setPropertytype] = useState('');\n  const [video, setVideo] = useState(null);\n  const [imageUrls, setImageUrls] = useState([]);\n  const [videoUrls, setVideoUrls] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    e.preventDefault();\n    console.log(e.target.name);\n\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setFiles(prevState => [...prevState, newImage]);\n    }\n  };\n\n  const handleVideoChange = e => {\n    e.preventDefault();\n    setVideo(e.target.files[0]);\n  };\n\n  const handleNameChange = e => {\n    setHousename(e.target.value);\n    console.log(housename);\n  };\n\n  const handleDescrptionChange = e => {\n    setDescription(e.target.value);\n  };\n\n  const handleDestrictChange = e => {\n    setDistrict(e.target.value);\n  };\n\n  const handleSeferChange = e => {\n    setSefer(e.target.value);\n  };\n\n  const handleTypeChange = e => {\n    setPropertytype(e.target.value);\n  };\n\n  const handleFeeChange = e => {\n    setFeeperMonth(e.target.value);\n  };\n\n  const handleSizeChange = e => {\n    setSize(e.target.value);\n  };\n\n  const handleAvailableChange = e => {\n    setAvailable(e.target.value);\n  };\n\n  const handleBedChange = e => {\n    setNumberOfBeds(e.target.value);\n  };\n\n  const houseId = params.houseId;\n\n  const updateHouse = async () => {\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    try {\n      const res = await axios.put(`http://localhost:5000/api/updateHouse/${houseId}`, {\n        housename,\n        description,\n        district,\n        sefer,\n        numberofbeds,\n        size,\n        feepermonth,\n        available,\n        propertytype,\n        videoUrls,\n        imageUrls\n      }, config);\n      console.log(res);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleMultipleFileSubmit = async id => {\n    const formData = new FormData();\n    formData.append('housename', housename);\n    formData.append('description', description);\n    formData.append('district', district);\n    formData.append('sefer', sefer);\n    formData.append('numberofbeds', numberofbeds);\n    formData.append('size', size);\n    formData.append('feepermonth', feepermonth);\n    formData.append('available', available);\n    formData.append('propertytype', propertytype);\n    formData.append('video', videoUrls);\n\n    for (let i = 0; i < imageUrls.length; i++) {\n      formData.append('files', imageUrls[i]);\n    }\n\n    await updateHouse(formData);\n    console.log(formData);\n    history.push('/managelisting');\n  };\n\n  const handleUpload = () => {\n    const promises = [];\n    const uploadTaskTwo = storage.ref(`images/${video.name}`).put(video);\n    promises.push(uploadTaskTwo);\n    uploadTaskTwo.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n    }, async () => {\n      const urls = await storage.ref(\"images\").child(video.name).getDownloadURL();\n      setVideoUrls(prevState => [...prevState, urls]);\n      console.log(\"this is a video part\", urls);\n    });\n    files.map(image => {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      promises.push(uploadTask);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgress(progress);\n      }, error => {\n        console.log(error);\n      }, async () => {\n        const urls = await storage.ref(\"images\").child(image.name).getDownloadURL();\n        setImageUrls(prevState => [...prevState, urls]);\n        console.log(\"this is a iamge part\", urls);\n      });\n    });\n    Promise.all(promises).then(() => alert(\"All images uploaded\")).then().catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      children: /*#__PURE__*/_jsxDEV(Grid.Column, {\n        textAlign: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: /*#__PURE__*/_jsxDEV(Segment, {\n            raised: true,\n            children: [/*#__PURE__*/_jsxDEV(Progress, {\n              percent: progress,\n              success: true,\n              progress: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), houseId, /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: Input,\n              name: \"housename\",\n              type: \"text\",\n              label: \"House Name\",\n              placeholder: \"house name\",\n              onChange: handleNameChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"property type\",\n              control: Input,\n              label: \"Property Type\",\n              name: \"propertytype\",\n              placeholder: \"property type\",\n              onChange: handleTypeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"district\",\n              control: Input,\n              label: \"District\",\n              name: \"district\",\n              placeholder: \"District or Sub City\",\n              onChange: handleDestrictChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: Input,\n              label: \"Sefer\",\n              name: \"sefer\",\n              placeholder: \"Sefer or Village\",\n              onChange: handleSeferChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: TextArea,\n              label: \"Description\",\n              name: \"description\",\n              placeholder: \"House description\",\n              onChange: handleDescrptionChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: Input,\n              type: \"number\",\n              name: \"size\",\n              label: \"Square Footage\",\n              placeholder: \"Size of a house\",\n              onChange: handleSizeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: Input,\n              type: \"number\",\n              name: \"feepermonth\",\n              label: \"Lease Fee\",\n              placeholder: \"Fee\",\n              onChange: handleFeeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: Input,\n              type: \"number\",\n              name: \"numberofbeds\",\n              label: \"Number of Beds\",\n              placeholder: \"beds\",\n              onChange: handleBedChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              control: Input,\n              type: \"file\",\n              name: \"files\",\n              multiple: true,\n              label: \"Photos of the House\",\n              icon: \"upload\",\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n              required: true,\n              id: \"form-input-control-last-name\",\n              control: Input,\n              type: \"file\",\n              name: \"video\",\n              label: \"Videos about the house\",\n              onChange: handleVideoChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"available\",\n              id: \"available\",\n              onChange: handleAvailableChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"false\",\n                children: \"No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"true\",\n                children: \"Yes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUpload,\n              children: \"confirm Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: updateHouse,\n              children: \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditHouse, \"MmMRNH5YHn9IF85AATE6pdyYvXw=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = EditHouse;\nexport default EditHouse;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditHouse\");","map":{"version":3,"sources":["/home/yohannis/Desktop/Final-Project OHR/client/src/components/screen/EditHouse.js"],"names":["React","useState","TextArea","Progress","Form","Grid","Input","Segment","storage","axios","useParams","useHistory","EditHouse","house","history","params","housename","setHousename","description","setDescription","numberofbeds","setNumberOfBeds","district","setDistrict","sefer","setSefer","feepermonth","setFeeperMonth","size","setSize","available","setAvailable","propertytype","setPropertytype","video","setVideo","imageUrls","setImageUrls","videoUrls","setVideoUrls","files","setFiles","progress","setProgress","handleChange","e","preventDefault","console","log","target","name","i","length","newImage","Math","random","prevState","handleVideoChange","handleNameChange","value","handleDescrptionChange","handleDestrictChange","handleSeferChange","handleTypeChange","handleFeeChange","handleSizeChange","handleAvailableChange","handleBedChange","houseId","updateHouse","config","header","res","put","err","handleMultipleFileSubmit","id","formData","FormData","append","push","handleUpload","promises","uploadTaskTwo","ref","on","snapshot","round","bytesTransferred","totalBytes","error","urls","child","getDownloadURL","map","image","uploadTask","Promise","all","then","alert","catch"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { TextArea,Progress, Form, Grid, Input, Segment } from 'semantic-ui-react'\nimport storage from '../../firebase'\nimport axios from 'axios'\nimport { useParams,useHistory} from 'react-router-dom';\nconst EditHouse = ({house}) => {\n    const history = useHistory()\n    let params = useParams()\n    const [housename, setHousename] = useState('')\n    const [description, setDescription] = useState('')\n    const [numberofbeds, setNumberOfBeds] = useState(0)\n    const [district, setDistrict] = useState('')\n    const [sefer, setSefer] = useState('')\n    const [feepermonth, setFeeperMonth] = useState(0)\n    const [size, setSize] = useState(0)\n    const [available, setAvailable] = useState(false)\n    const [propertytype, setPropertytype] = useState('')\n    const [video, setVideo] = useState(null)\n    const [imageUrls, setImageUrls] = useState([]);\n    const [videoUrls, setVideoUrls] = useState([]);\n    const [files, setFiles] = useState([]);\n    const [progress, setProgress] = useState(0);\n\n    const handleChange = (e) => {\n        e.preventDefault()\n        console.log(e.target.name)\n        for (let i = 0; i < e.target.files.length; i++) {\n            const newImage = e.target.files[i];\n            newImage[\"id\"] = Math.random();\n            setFiles((prevState) => [...prevState, newImage]);\n        }\n    };\n    const handleVideoChange = (e) => {\n        e.preventDefault()\n        setVideo(e.target.files[0])\n\n    }\n    const handleNameChange = (e) => {\n        setHousename(e.target.value)\n        console.log(housename)\n    }\n    const handleDescrptionChange = (e) => {\n        setDescription(e.target.value)\n    }\n    const handleDestrictChange = (e) => {\n        setDistrict(e.target.value)\n    }\n    const handleSeferChange = (e) => {\n        setSefer(e.target.value)\n    }\n    const handleTypeChange = (e) => {\n        setPropertytype(e.target.value)\n    }\n    const handleFeeChange = (e) => {\n        setFeeperMonth(e.target.value)\n    }\n    const handleSizeChange = (e) => {\n        setSize(e.target.value)\n    }\n    const handleAvailableChange = (e) => {\n        setAvailable(e.target.value)\n    }\n    const handleBedChange = (e) => {\n        setNumberOfBeds(e.target.value)\n    }\n    const houseId = params.houseId\n    const updateHouse = async () => {\n        const config = {\n            header: {\n                \"Content-Type\": \"application/json\",\n            },\n        };\n        try {\n            const res = await axios.put(`http://localhost:5000/api/updateHouse/${houseId}`, {\n                housename,\n                description,district,sefer,numberofbeds,size,feepermonth,available,propertytype,videoUrls,imageUrls\n            }, config);\n            console.log(res)\n        } catch (err) {\n            console.log(err)\n        }\n    };\n    const handleMultipleFileSubmit = async (id) => {\n        const formData = new FormData();\n        formData.append('housename', housename);\n        formData.append('description', description);\n        formData.append('district', district);\n        formData.append('sefer', sefer);\n        formData.append('numberofbeds', numberofbeds);\n        formData.append('size', size);\n        formData.append('feepermonth', feepermonth);\n        formData.append('available', available);\n        formData.append('propertytype', propertytype);\n        formData.append('video', videoUrls);\n        for (let i = 0; i < imageUrls.length; i++) {\n            formData.append('files', imageUrls[i]);\n        }\n        await updateHouse(formData);\n        console.log(formData)\n        history.push('/managelisting')\n\n    }\n    const handleUpload = () => {\n        const promises = [];\n        const uploadTaskTwo = storage.ref(`images/${video.name}`).put(video)\n        promises.push(uploadTaskTwo);\n        uploadTaskTwo.on(\n            \"state_changed\",\n            (snapshot) => {\n                const progress = Math.round(\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                );\n                setProgress(progress);\n            },\n            (error) => {\n                console.log(error);\n            },\n            async () => {\n                const urls = await storage.ref(\"images\").child(video.name).getDownloadURL()\n                setVideoUrls((prevState) => [...prevState, urls]);\n                console.log(\"this is a video part\", urls)\n\n            }\n\n        )\n\n        files.map((image) => {\n            const uploadTask = storage.ref(`images/${image.name}`).put(image);\n            promises.push(uploadTask);\n            uploadTask.on(\n                \"state_changed\",\n                (snapshot) => {\n                    const progress = Math.round(\n                        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                    );\n                    setProgress(progress);\n                },\n                (error) => {\n                    console.log(error);\n                },\n                async () => {\n                    const urls = await storage.ref(\"images\").child(image.name).getDownloadURL();\n                    setImageUrls((prevState) => [...prevState, urls]);\n                    console.log(\"this is a iamge part\", urls)\n\n                }\n            );\n\n        });\n        Promise.all(promises)\n            .then(\n                () => alert(\"All images uploaded\")\n            ).then()\n            .catch((err) => console.log(err));\n\n    };\n    \n    return (\n        <div>\n            <Grid>\n                <Grid.Column textAlign='center'>\n                    <Form>\n                        <Segment raised >\n                            <Progress percent={progress} success progress />\n                            {houseId}\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={Input}\n                                name='housename'\n                                type='text'\n                                label='House Name'\n                                placeholder='house name'\n                                onChange={handleNameChange}\n                            />\n                            <Form.Field\n                                required\n                                id='property type'\n                                control={Input}\n                                label='Property Type'\n                                name='propertytype'\n                                placeholder='property type'\n                                onChange={handleTypeChange}\n                            />\n\n                            <Form.Field\n                                required\n                                id='district'\n                                control={Input}\n                                label='District'\n                                name='district'\n                                placeholder='District or Sub City'\n                                onChange={handleDestrictChange}\n                            />\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={Input}\n                                label='Sefer'\n                                name='sefer'\n                                placeholder='Sefer or Village'\n                                onChange={handleSeferChange}\n                            />\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={TextArea}\n                                label='Description'\n                                name='description'\n                                placeholder='House description'\n                                onChange={handleDescrptionChange}\n\n                            />\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={Input}\n                                type=\"number\"\n                                name='size'\n                                label='Square Footage'\n                                placeholder='Size of a house'\n                                onChange={handleSizeChange}\n                                \n                            />\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={Input}\n                                type=\"number\"\n                                name='feepermonth'\n                                label='Lease Fee'\n                                placeholder='Fee'\n                                onChange={handleFeeChange}\n                            />\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={Input}\n                                type=\"number\"\n                                name='numberofbeds'\n                                label='Number of Beds'\n                                placeholder='beds'\n                                onChange={handleBedChange}\n                            />\n                            <Form.Field\n                                required\n                                control={Input}\n                                type=\"file\"\n                                name=\"files\"\n                                multiple\n                                label='Photos of the House'\n                                icon='upload'\n                                onChange={handleChange}\n                            />\n                            <Form.Field\n                                required\n                                id='form-input-control-last-name'\n                                control={Input}\n                                type=\"file\"\n                                name=\"video\"\n                                label='Videos about the house'\n                                onChange={handleVideoChange}\n\n                            />\n\n                            <select name=\"available\" id=\"available\" onChange={handleAvailableChange}>\n                                <option value=\"false\">No</option>\n                                <option value=\"true\">Yes</option>\n                            </select>\n                            <button onClick={handleUpload}>confirm Update</button>\n                            <button onClick={updateHouse}>Update</button>\n\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n\n            </Grid>\n        </div>\n    )\n}\n\nexport default EditHouse\n"]},"metadata":{},"sourceType":"module"}