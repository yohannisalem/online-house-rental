{"ast":null,"code":"var _jsxFileName = \"/home/yohannis/Desktop/min/Final-Project OHR/client/src/components/screen/Notification.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Notification = () => {\n  if ('serviceWorker' in navigator) {\n    send().catch(err => console.error(err));\n  } //register the service worker, register our push api, sedn the notifation\n\n\n  async function send() {\n    //register service worker\n    const register = await navigator.serviceWorker.register('/sw.js', {\n      scope: '/'\n    }); //register push\n\n    console.log('Regikstering push...');\n    const subscription = await register.pushManager.subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\n    }); //Send push notification\n\n    await fetch(\"http://localhost:5000/api/subscribe\", {\n      method: \"POST\",\n      body: JSON.stringify(subscription),\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    });\n  }\n\n  function urlBase64ToUint8Array(base64String) {\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\");\n    const rawData = window.atob(base64);\n    const outputArray = new Uint8Array(rawData.length);\n\n    for (let i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i);\n    }\n\n    return outputArray;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"notification\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Notification;\nexport default Notification;\nconst publicVapidKey = 'BDaEMWiYCo_B0E7SXKM1OTOwPNwEGMXw4MDMIBEroOz65tOrePfVc_J-q9_0ipb_0M6OP3fM9SflHgzwJrDthzs'; //check if the serveice worker can work in the current browser\n\nvar _c;\n\n$RefreshReg$(_c, \"Notification\");","map":{"version":3,"sources":["/home/yohannis/Desktop/min/Final-Project OHR/client/src/components/screen/Notification.js"],"names":["React","Notification","navigator","send","catch","err","console","error","register","serviceWorker","scope","log","subscription","pushManager","subscribe","userVisibleOnly","applicationServerKey","urlBase64ToUint8Array","publicVapidKey","fetch","method","body","JSON","stringify","headers","base64String","padding","repeat","length","base64","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,YAAY,GAAG,MAAM;AACvB,MAAG,mBAAmBC,SAAtB,EAAgC;AAC5BC,IAAAA,IAAI,GAAGC,KAAP,CAAaC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAApB;AACH,GAHsB,CAKvB;;;AACA,iBAAeF,IAAf,GAAqB;AACjB;AACA,UAAMK,QAAQ,GAAG,MAAMN,SAAS,CAACO,aAAV,CAAwBD,QAAxB,CAAiC,QAAjC,EAA2C;AAC9DE,MAAAA,KAAK,EAAE;AADuD,KAA3C,CAAvB,CAFiB,CAMjB;;AACAJ,IAAAA,OAAO,CAACK,GAAR,CAAY,sBAAZ;AACA,UAAMC,YAAY,GAAG,MAAMJ,QAAQ,CAACK,WAAT,CAAqBC,SAArB,CAA+B;AACtDC,MAAAA,eAAe,EAAE,IADqC;AAEtDC,MAAAA,oBAAoB,EAAEC,qBAAqB,CAACC,cAAD;AAFW,KAA/B,CAA3B,CARiB,CAajB;;AACA,UAAMC,KAAK,CAAC,qCAAD,EAAwC;AAC/CC,MAAAA,MAAM,EAAE,MADuC;AAE/CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,YAAf,CAFyC;AAG/CY,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AAHsC,KAAxC,CAAX;AAOH;;AAED,WAASP,qBAAT,CAA+BQ,YAA/B,EAA6C;AACzC,UAAMC,OAAO,GAAG,IAAIC,MAAJ,CAAW,CAAC,IAAIF,YAAY,CAACG,MAAb,GAAsB,CAA3B,IAAgC,CAA3C,CAAhB;AACA,UAAMC,MAAM,GAAG,CAACJ,YAAY,GAAGC,OAAhB,EACZI,OADY,CACJ,KADI,EACG,GADH,EAEZA,OAFY,CAEJ,IAFI,EAEE,GAFF,CAAf;AAIA,UAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYJ,MAAZ,CAAhB;AACA,UAAMK,WAAW,GAAG,IAAIC,UAAJ,CAAeJ,OAAO,CAACH,MAAvB,CAApB;;AAEA,SAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,OAAO,CAACH,MAA5B,EAAoC,EAAEQ,CAAtC,EAAyC;AACvCF,MAAAA,WAAW,CAACE,CAAD,CAAX,GAAiBL,OAAO,CAACM,UAAR,CAAmBD,CAAnB,CAAjB;AACD;;AACD,WAAOF,WAAP;AACH;;AACD,sBACI;AAAA,2BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CAhDD;;KAAMjC,Y;AAkDN,eAAeA,YAAf;AACA,MAAMiB,cAAc,GAAG,yFAAvB,C,CAEA","sourcesContent":["import React from 'react'\n\nconst Notification = () => {\n    if('serviceWorker' in navigator){\n        send().catch(err => console.error(err));\n    }\n    \n    //register the service worker, register our push api, sedn the notifation\n    async function send(){\n        //register service worker\n        const register = await navigator.serviceWorker.register('/sw.js', {\n            scope: '/'\n        });\n    \n        //register push\n        console.log('Regikstering push...')\n        const subscription = await register.pushManager.subscribe({\n            userVisibleOnly: true,\n            applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\n        });\n       \n        //Send push notification\n        await fetch(\"http://localhost:5000/api/subscribe\", {\n            method: \"POST\",\n            body: JSON.stringify(subscription),\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        });\n    }\n    \n    function urlBase64ToUint8Array(base64String) {\n        const padding = \"=\".repeat((4 - base64String.length % 4) % 4);\n        const base64 = (base64String + padding)\n          .replace(/\\-/g, \"+\")\n          .replace(/_/g, \"/\");\n      \n        const rawData = window.atob(base64);\n        const outputArray = new Uint8Array(rawData.length);\n      \n        for (let i = 0; i < rawData.length; ++i) {\n          outputArray[i] = rawData.charCodeAt(i);\n        }\n        return outputArray;\n    }\n    return (\n        <div>\n            <h2>notification</h2>\n        </div>\n    )\n}\n\nexport default Notification\nconst publicVapidKey = 'BDaEMWiYCo_B0E7SXKM1OTOwPNwEGMXw4MDMIBEroOz65tOrePfVc_J-q9_0ipb_0M6OP3fM9SflHgzwJrDthzs';\n\n//check if the serveice worker can work in the current browser\n"]},"metadata":{},"sourceType":"module"}