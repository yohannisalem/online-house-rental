{"ast":null,"code":"var _jsxFileName = \"/home/yohannis/Desktop/min/Final-Project OHR/client/src/components/screen/RegisterHouses.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react';\nimport storage from \"../../firebase\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RegisterHouses = () => {\n  _s();\n\n  const [housedata, setHouseData] = useState(null);\n  const [housename, setHousename] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [numberofbeds, setNumberOfBeds] = useState(0);\n  const [feepermonth, setFeeperMonth] = useState(0);\n  const [size, setSize] = useState(0);\n  const [available, setAvailable] = useState(false);\n  const [propertytype, setPropertytype] = useState(\"\");\n  const [files, setFiles] = useState([]);\n  const [video, setVideo] = useState(null);\n  const [urls, setUrls] = useState(null);\n  const [uploaded, setUploaded] = useState(0);\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setHouseData({ ...housedata,\n      [e.target.name]: value\n    });\n  };\n\n  const handleChangeForImg = e => {\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setFiles(prevState => [...prevState, newImage]);\n    }\n  };\n\n  const createHouse = async housedata => {\n    try {\n      await axios.post(\"/houses/multipleFiles\", housedata);\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  const upload = items => {\n    items.forEach(item => {\n      const promises = [];\n      item.files.map(image => {\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\n        promises.push(uploadTask);\n        uploadTask.on(\"state_changed\", error => {\n          console.log(error);\n        }, async () => {\n          await storage.ref(\"images\").child(image.name).getDownloadURL().then(urls => {\n            setUrls(prevState => [...prevState, urls]);\n          });\n        });\n      });\n      const fileName = new Date().getTime() + item.label + item.file.name;\n      const uploadTaskFile = storage.ref(`/items/${fileName}`).put(item.file);\n      uploadTaskFile.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n      }, error => {\n        console.log(error);\n      }, () => {\n        uploadTaskFile.snapshot.ref.getDownloadURL().then(url => {\n          setHouseData(prev => {\n            return { ...prev,\n              [item.label]: url\n            };\n          });\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    upload([{\n      file: files,\n      label: \"files\"\n    }, {\n      file: video,\n      label: \"video\"\n    }]);\n    createHouse(housedata);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newProduct\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"addProductTitle\",\n      children: \"New Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"addProductForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"img\",\n          name: \"files\",\n          multiple: true,\n          onChange: handleChangeForImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"House Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Villa\",\n          name: \"housename\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"description\",\n          name: \"desc\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Fee per Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"Fee\",\n          name: \"fee\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Size\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"House Size\",\n          name: \"size\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Number of Beds\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"beds\",\n          name: \"beds\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"propertytype\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"type\",\n          name: \"propertytype\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Available?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"available\",\n          id: \"available\",\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"video\",\n          onChange: e => setVideo(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RegisterHouses, \"szAAIqz/oYOvKlxAx5kmrIIcts4=\");\n\n_c = RegisterHouses;\nexport default RegisterHouses;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterHouses\");","map":{"version":3,"sources":["/home/yohannis/Desktop/min/Final-Project OHR/client/src/components/screen/RegisterHouses.js"],"names":["React","useState","Button","Form","Grid","Header","Image","Message","Segment","storage","axios","RegisterHouses","housedata","setHouseData","housename","setHousename","description","setDescription","numberofbeds","setNumberOfBeds","feepermonth","setFeeperMonth","size","setSize","available","setAvailable","propertytype","setPropertytype","files","setFiles","video","setVideo","urls","setUrls","uploaded","setUploaded","handleChange","e","value","target","name","handleChangeForImg","i","length","newImage","Math","random","prevState","createHouse","post","err","upload","items","forEach","item","promises","map","image","uploadTask","ref","put","push","on","error","console","log","child","getDownloadURL","then","fileName","Date","getTime","label","file","uploadTaskFile","snapshot","progress","bytesTransferred","totalBytes","url","prev","handleUpload","preventDefault"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react'\nimport storage from \"../../firebase\";\nimport axios from 'axios'\nconst RegisterHouses = () => {\n  const [housedata,setHouseData]= useState(null)\n  const [housename,setHousename] = useState(\"\")\n  const [description,setDescription] = useState(\"\")\n  const [numberofbeds,setNumberOfBeds] = useState(0)\n  const [feepermonth,setFeeperMonth] = useState(0)\n  const [size,setSize] = useState(0)\n  const [available,setAvailable] = useState(false)\n  const [propertytype,setPropertytype] = useState(\"\")\n  const [files, setFiles] = useState([]);\n  const [video, setVideo] = useState(null);\n  const [urls,setUrls] = useState(null)\n  const [uploaded, setUploaded] = useState(0);\n\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setHouseData({ ...housedata, [e.target.name]: value });\n  };\n  const handleChangeForImg= (e)=>{\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setFiles((prevState) => [...prevState, newImage]);\n    }\n\n  }\n  const createHouse = async (housedata) => {\n    try {\n      await axios.post(\"/houses/multipleFiles\", housedata);  \n    } catch (err) {\n      throw err\n    }\n  };\n\n  const upload = (items) => {\n    items.forEach((item) => {\n      const promises =[]\n      item.files.map((image) => {\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\n        promises.push(uploadTask);\n        uploadTask.on(\n          \"state_changed\",\n          (error) => {\n            console.log(error);\n          },\n          async () => {\n            await storage\n              .ref(\"images\")\n              .child(image.name)\n              .getDownloadURL()\n              .then((urls) => {\n                setUrls((prevState) => [...prevState, urls]);\n              });\n          }\n        );\n      })\n      const fileName = new Date().getTime() + item.label + item.file.name;\n      const uploadTaskFile = storage.ref(`/items/${fileName}`).put(item.file);\n      uploadTaskFile.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(\"Upload is \" + progress + \"% done\");\n        },\n        (error) => {\n          console.log(error);\n        },\n        () => {\n          uploadTaskFile.snapshot.ref.getDownloadURL().then((url) => {\n            setHouseData((prev) => {\n              return { ...prev, [item.label]: url };\n            });\n          });\n        }\n      );\n    });\n  };\n\n  const handleUpload = (e) => {\n    e.preventDefault();\n    upload([\n      { file: files, label: \"files\" },\n      { file: video, label: \"video\" },\n    ]);\n    createHouse(housedata);\n  };\n\n    return (      \n    <div className=\"newProduct\">\n      <h1 className=\"addProductTitle\">New Movie</h1>\n      <form className=\"addProductForm\">\n        <div className=\"addProductItem\">\n          <label>Image</label>\n          <input\n            type=\"file\"\n            id=\"img\"\n            name=\"files\"\n            multiple\n            onChange={handleChangeForImg}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>House Name</label>\n          <input\n            type=\"text\"\n            placeholder=\"Villa\"\n            name=\"housename\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Description</label>\n          <input\n            type=\"text\"\n            placeholder=\"description\"\n            name=\"desc\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Fee per Month</label>\n          <input\n            type=\"number\"\n            placeholder=\"Fee\"\n            name=\"fee\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Size</label>\n          <input\n            type=\"text\"\n            placeholder=\"House Size\"\n            name=\"size\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Number of Beds</label>\n          <input\n            type=\"text\"\n            placeholder=\"beds\"\n            name=\"beds\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>propertytype</label>\n          <input\n            type=\"text\"\n            placeholder=\"type\"\n            name=\"propertytype\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Available?</label>\n          <select name=\"available\" id=\"available\" onChange={handleChange}>\n            <option value=\"false\">No</option>\n            <option value=\"true\">Yes</option>\n          </select>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Video</label>\n          <input\n            type=\"file\"\n            name=\"video\"\n            onChange={(e) => setVideo(e.target.files[0])}\n          />\n        </div>\n          <button className=\"addProductButton\" onClick={handleUpload}>\n            Upload\n          </button>\n      </form>\n    </div>\n    )\n}\n\nexport default RegisterHouses\n"]},"metadata":{},"sourceType":"module"}