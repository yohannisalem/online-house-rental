{"ast":null,"code":"var _jsxFileName = \"/home/yohannis/Desktop/Final-Project OHR/client/src/components/screen/FileUp.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Container, Form, Input, Progress, Segment, TextArea } from \"semantic-ui-react\";\nimport storage from \"../../firebase\";\nimport useGeoLocation from \"../maps/useGeoLocation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst publicVapidKey = 'BMffGk0gRxLPOSi-eOlXoR1ahY9Ce7uBY3010C06TeMoRYS_6n1A4ItVeOeNYutDlhPK27WW5UMrdyjBEj_-Pxo'; //register the service worker, register our push api, sedn the notifation\n\nasync function send() {\n  //register service worker\n  const register = await navigator.serviceWorker.register('/sw.js', {\n    scope: '/'\n  }); //register push\n\n  console.log('Registering push...');\n  const subscription = await register.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\n  }); //Send push notification\n\n  await fetch(\"http://localhost:5000/api/subscribe\", {\n    method: \"POST\",\n    body: JSON.stringify(subscription),\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  });\n}\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\");\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n\n  return outputArray;\n}\n\nconst FileUp = () => {\n  _s();\n\n  let history = useHistory();\n  const [error, setError] = useState(\"\");\n  const location = useGeoLocation();\n  const [disable, setDisable] = useState(true);\n  const [housename, setHousename] = useState('');\n  const [description, setDescription] = useState('');\n  const [numberofbeds, setNumberOfBeds] = useState(0);\n  const [district, setDistrict] = useState('');\n  const [sefer, setSefer] = useState('');\n  const [termsandcondition, setTermsandcondition] = useState('');\n  const [leaseperiod, setLeaseperiod] = useState('');\n  const [feepermonth, setFeeperMonth] = useState(0);\n  const [size, setSize] = useState(0);\n  const [available, setAvailable] = useState(false);\n  const [propertytype, setPropertytype] = useState('');\n  const [video, setVideo] = useState(null);\n  const [imageUrls, setImageUrls] = useState([]);\n  const [videoUrls, setVideoUrls] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    console.log(e.target.name);\n\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setFiles(prevState => [...prevState, newImage]);\n    }\n  };\n\n  const handleVideoChange = e => {\n    setVideo(e.target.files[0]);\n  };\n\n  const handleNameChange = e => {\n    setHousename(e.target.value);\n    console.log(housename);\n  };\n\n  const handleDescrptionChange = e => {\n    setDescription(e.target.value);\n  };\n\n  const handleDestrictChange = e => {\n    setDistrict(e.target.value);\n  };\n\n  const handleSeferChange = e => {\n    setSefer(e.target.value);\n  };\n\n  const handleTermandConditionChange = e => {\n    setTermsandcondition(e.target.value);\n  };\n\n  const handleLeaseperiodChange = e => {\n    setLeaseperiod(e.target.value);\n  };\n\n  const handleTypeChange = e => {\n    setPropertytype(e.target.value);\n  };\n\n  const handleFeeChange = e => {\n    setFeeperMonth(e.target.value);\n  };\n\n  const handleSizeChange = e => {\n    setSize(e.target.value);\n  };\n\n  const handleAvailableChange = e => {\n    setAvailable(e.target.value);\n  };\n\n  const handleBedChange = e => {\n    setNumberOfBeds(e.target.value);\n  };\n\n  const createHouse = async housedata => {\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/multipleFiles\", housedata, config);\n      send();\n      console.log(res);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleMultipleFileSubmit = async () => {\n    const formData = new FormData();\n    formData.append('ownerusername', localStorage.getItem(\"username\"));\n    formData.append('owneremail', localStorage.getItem(\"email\"));\n    formData.append('housename', housename);\n    formData.append('description', description);\n    formData.append('district', district);\n    formData.append('sefer', sefer);\n    formData.append('termsandcondition', termsandcondition);\n    formData.append('leaseperiod', leaseperiod);\n    formData.append('numberofbeds', numberofbeds);\n    formData.append('size', size);\n    formData.append('feepermonth', feepermonth);\n    formData.append('available', available);\n    formData.append('propertytype', propertytype);\n    formData.append('video', videoUrls);\n\n    for (let i = 0; i < imageUrls.length; i++) {\n      formData.append('files', imageUrls[i]);\n    }\n\n    await createHouse(formData);\n    console.log(formData);\n  };\n\n  const handleUpload = () => {\n    const promises = [];\n    const uploadTaskTwo = storage.ref(`images/${video.name}`).put(video);\n    promises.push(uploadTaskTwo);\n    uploadTaskTwo.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n    }, async () => {\n      const urls = await storage.ref(\"images\").child(video.name).getDownloadURL();\n      setVideoUrls(prevState => [...prevState, urls]);\n      console.log(\"this is a video part\", urls);\n    });\n    files.map(image => {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      promises.push(uploadTask);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgress(progress);\n      }, error => {\n        console.log(error);\n      }, async () => {\n        const urls = await storage.ref(\"images\").child(image.name).getDownloadURL();\n        setImageUrls(prevState => [...prevState, urls]);\n        console.log(\"this is a iamge part\", urls);\n      });\n    });\n    Promise.all(promises).then(() => {\n      alert(\"All images uploaded\");\n      setDisable(false);\n    }).then().catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"landlordToken\")) {\n      history.push(\"/landlordLogin\");\n    }\n\n    const fetchPrivateDate = async () => {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"landlordToken\")}`\n        }\n      };\n\n      try {\n        const {\n          data\n        } = await axios.get(\"http://localhost:5000/api/private\", config);\n      } catch (error) {\n        /* localStorage.removeItem(\"landlordToken\"); */\n        setError(\"You are not authorized please login\");\n      }\n    };\n    /* fetchPrivateDate(); */\n\n  }, [history]);\n  /* handling notification ======================================================================*/\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: \"lightGray\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        as: \"h2\",\n        icon: true,\n        textAlign: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          name: \"users\",\n          circular: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Header.Content, {\n          children: \"House\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Image, {\n        centered: true,\n        size: \"large\",\n        src: \"https://react.semantic-ui.com/images/wireframe/centered-paragraph.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 5\n      }, this), \"Build your listing to find the perfect renter \\u2014 listings with a lot of detail and photos tend to attract the most leads, so don\\u2019t be shy! Not sure what to include? Check out our tips and tricks here.\", /*#__PURE__*/_jsxDEV(Form, {\n        children: /*#__PURE__*/_jsxDEV(Segment, {\n          raised: true,\n          children: [/*#__PURE__*/_jsxDEV(Progress, {\n            percent: progress,\n            success: true,\n            progress: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            name: \"housename\",\n            type: \"text\",\n            label: \"House Name\",\n            placeholder: \"house name\",\n            onChange: handleNameChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"property type\",\n            control: Input,\n            label: \"Property Type\",\n            name: \"propertytype\",\n            placeholder: \"property type\",\n            onChange: handleTypeChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"district\",\n            control: Input,\n            label: \"District\",\n            name: \"district\",\n            placeholder: \"District or Sub City\",\n            onChange: handleDestrictChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            label: \"Sefer\",\n            name: \"sefer\",\n            placeholder: \"Sefer or Village\",\n            onChange: handleSeferChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            label: \"leaseperiod\",\n            name: \"leaseperiod\",\n            placeholder: \"leaseperiod\",\n            onChange: handleLeaseperiodChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: TextArea,\n            label: \"Terms\",\n            name: \"termsandcondition\",\n            placeholder: \"Termsandcondition\",\n            onChange: handleTermandConditionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: TextArea,\n            label: \"Description\",\n            name: \"description\",\n            placeholder: \"House description\",\n            onChange: handleDescrptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            type: \"number\",\n            name: \"size\",\n            label: \"Square Footage\",\n            placeholder: \"Size of a house\",\n            onChange: handleSizeChange,\n            value: size\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            type: \"number\",\n            name: \"feepermonth\",\n            label: \"Lease Fee\",\n            placeholder: \"Fee\",\n            onChange: handleFeeChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            type: \"number\",\n            name: \"numberofbeds\",\n            label: \"Number of Beds\",\n            placeholder: \"beds\",\n            onChange: handleBedChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            control: Input,\n            type: \"file\",\n            name: \"files\",\n            multiple: true,\n            label: \"Photos of the House\",\n            icon: \"upload\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            required: true,\n            id: \"form-input-control-last-name\",\n            control: Input,\n            type: \"file\",\n            name: \"video\",\n            label: \"Videos about the house\",\n            onChange: handleVideoChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"available\",\n            id: \"available\",\n            onChange: handleAvailableChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"false\",\n              children: \"No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"true\",\n              children: \"Yes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleUpload,\n            children: \"create upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleMultipleFileSubmit,\n            disabled: disable,\n            children: \"final Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FileUp, \"vM6tyaKyFpgLinXwZlODEUO92bk=\", false, function () {\n  return [useHistory, useGeoLocation];\n});\n\n_c = FileUp;\nexport default FileUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"FileUp\");","map":{"version":3,"sources":["/home/yohannis/Desktop/Final-Project OHR/client/src/components/screen/FileUp.js"],"names":["axios","React","useEffect","useState","useHistory","Container","Form","Input","Progress","Segment","TextArea","storage","useGeoLocation","publicVapidKey","send","register","navigator","serviceWorker","scope","console","log","subscription","pushManager","subscribe","userVisibleOnly","applicationServerKey","urlBase64ToUint8Array","fetch","method","body","JSON","stringify","headers","base64String","padding","repeat","length","base64","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","FileUp","history","error","setError","location","disable","setDisable","housename","setHousename","description","setDescription","numberofbeds","setNumberOfBeds","district","setDistrict","sefer","setSefer","termsandcondition","setTermsandcondition","leaseperiod","setLeaseperiod","feepermonth","setFeeperMonth","size","setSize","available","setAvailable","propertytype","setPropertytype","video","setVideo","imageUrls","setImageUrls","videoUrls","setVideoUrls","files","setFiles","progress","setProgress","handleChange","e","target","name","newImage","Math","random","prevState","handleVideoChange","handleNameChange","value","handleDescrptionChange","handleDestrictChange","handleSeferChange","handleTermandConditionChange","handleLeaseperiodChange","handleTypeChange","handleFeeChange","handleSizeChange","handleAvailableChange","handleBedChange","createHouse","housedata","config","header","res","post","err","handleMultipleFileSubmit","formData","FormData","append","localStorage","getItem","handleUpload","promises","uploadTaskTwo","ref","put","push","on","snapshot","round","bytesTransferred","totalBytes","urls","child","getDownloadURL","map","image","uploadTask","Promise","all","then","alert","catch","fetchPrivateDate","Authorization","data","get","backgroundColor"],"mappings":"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","sourcesContent":["\nimport axios from 'axios';\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Container, Form, Input, Progress, Segment, TextArea } from \"semantic-ui-react\";\nimport storage from \"../../firebase\";\nimport useGeoLocation from \"../maps/useGeoLocation\";\n\nconst publicVapidKey = 'BMffGk0gRxLPOSi-eOlXoR1ahY9Ce7uBY3010C06TeMoRYS_6n1A4ItVeOeNYutDlhPK27WW5UMrdyjBEj_-Pxo';\n//register the service worker, register our push api, sedn the notifation\n\nasync function send() {\n  //register service worker\n  const register = await navigator.serviceWorker.register('/sw.js', {\n    scope: '/'\n  });\n\n  //register push\n  console.log('Registering push...')\n  const subscription = await register.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\n  });\n\n  //Send push notification\n  await fetch(\"http://localhost:5000/api/subscribe\", {\n    method: \"POST\",\n    body: JSON.stringify(subscription),\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  });\n}\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/\\-/g, \"+\")\n    .replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nconst FileUp = () => {\n\n  let history = useHistory()\n  const [error, setError] = useState(\"\");\n\n  const location = useGeoLocation()\n  const [disable, setDisable] = useState(true);\n  const [housename, setHousename] = useState('')\n  const [description, setDescription] = useState('')\n  const [numberofbeds, setNumberOfBeds] = useState(0)\n  const [district, setDistrict] = useState('')\n  const [sefer, setSefer] = useState('')\n  const [termsandcondition, setTermsandcondition] = useState('')\n  const [leaseperiod, setLeaseperiod] = useState('')\n  const [feepermonth, setFeeperMonth] = useState(0)\n  const [size, setSize] = useState(0)\n  const [available, setAvailable] = useState(false)\n  const [propertytype, setPropertytype] = useState('')\n  const [video, setVideo] = useState(null)\n  const [imageUrls, setImageUrls] = useState([]);\n  const [videoUrls, setVideoUrls] = useState([]);\n  const [files, setFiles] = useState([]);\n\n\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = (e) => {\n    console.log(e.target.name)\n    for (let i = 0; i < e.target.files.length; i++) {\n      const newImage = e.target.files[i];\n      newImage[\"id\"] = Math.random();\n      setFiles((prevState) => [...prevState, newImage]);\n    }\n  };\n  const handleVideoChange = (e) => {\n    setVideo(e.target.files[0])\n\n  }\n  const handleNameChange = (e) => {\n    setHousename(e.target.value)\n    console.log(housename)\n  }\n  const handleDescrptionChange = (e) => {\n    setDescription(e.target.value)\n  }\n  const handleDestrictChange = (e) => {\n    setDistrict(e.target.value)\n  }\n  const handleSeferChange = (e) => {\n    setSefer(e.target.value)\n  }\n  const handleTermandConditionChange=(e)=>{\n    setTermsandcondition(e.target.value)\n  }\n  const handleLeaseperiodChange =(e)=>{\n    setLeaseperiod(e.target.value)\n  }\n  const handleTypeChange = (e) => {\n    setPropertytype(e.target.value)\n  }\n  const handleFeeChange = (e) => {\n    setFeeperMonth(e.target.value)\n  }\n  const handleSizeChange = (e) => {\n    setSize(e.target.value)\n  }\n  const handleAvailableChange = (e) => {\n    setAvailable(e.target.value)\n  }\n  const handleBedChange = (e) => {\n    setNumberOfBeds(e.target.value)\n  }\n\n  \n\n  const createHouse = async (housedata) => {\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\",\n      }\n    };\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/multipleFiles\", housedata, config);\n      send()\n      console.log(res)\n    } catch (err) {\n      console.log(err)\n    }\n  };\n  const handleMultipleFileSubmit = async () => {\n    const formData = new FormData();\n    formData.append('ownerusername', localStorage.getItem(\"username\"));\n    formData.append('owneremail', localStorage.getItem(\"email\"));\n    formData.append('housename', housename);\n    formData.append('description', description);\n    formData.append('district', district);\n    formData.append('sefer', sefer);\n    formData.append('termsandcondition',termsandcondition)\n    formData.append('leaseperiod',leaseperiod)\n    formData.append('numberofbeds', numberofbeds);\n    formData.append('size', size);\n    formData.append('feepermonth', feepermonth);\n    formData.append('available', available);\n    formData.append('propertytype', propertytype);\n    formData.append('video', videoUrls);\n    for (let i = 0; i < imageUrls.length; i++) {\n      formData.append('files', imageUrls[i]);\n    }\n\n    await createHouse(formData);\n    console.log(formData)\n\n  }\n\n\n  const handleUpload = () => {\n    const promises = [];\n    const uploadTaskTwo = storage.ref(`images/${video.name}`).put(video)\n    promises.push(uploadTaskTwo);\n    uploadTaskTwo.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      (error) => {\n        console.log(error);\n      },\n      async () => {\n        const urls = await storage.ref(\"images\").child(video.name).getDownloadURL()\n        setVideoUrls((prevState) => [...prevState, urls]);\n        console.log(\"this is a video part\", urls)\n\n      }\n\n    )\n\n    files.map((image) => {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      promises.push(uploadTask);\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress = Math.round(\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n          setProgress(progress);\n        },\n        (error) => {\n          console.log(error);\n        },\n        async () => {\n          const urls = await storage.ref(\"images\").child(image.name).getDownloadURL();\n          setImageUrls((prevState) => [...prevState, urls]);\n          console.log(\"this is a iamge part\", urls)\n\n        }\n      );\n\n    });\n    Promise.all(promises)\n      .then(\n        () =>{\n         alert(\"All images uploaded\")\n         setDisable(false)\n        }\n          \n      ).then()\n      .catch((err) => console.log(err));\n\n  };\n  useEffect(() => {\n    if (!localStorage.getItem(\"landlordToken\")) {\n      history.push(\"/landlordLogin\")\n    }\n    const fetchPrivateDate = async () => {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"landlordToken\")}`,\n        },\n      };\n\n      try {\n        const { data } = await axios.get(\"http://localhost:5000/api/private\", config);\n\n      } catch (error) {\n        /* localStorage.removeItem(\"landlordToken\"); */\n        setError(\"You are not authorized please login\");\n      }\n    };\n\n    /* fetchPrivateDate(); */\n  }, [history]);\n\n  \n  /* handling notification ======================================================================*/\n  return (\n    <div style={{backgroundColor:\"lightGray\"}}>\n      <Container>\n      <Header as='h2' icon textAlign='center'>\n      <Icon name='users' circular />\n      <Header.Content>House</Header.Content>\n    </Header>\n    <Image\n      centered\n      size='large'\n      src='https://react.semantic-ui.com/images/wireframe/centered-paragraph.png'\n    />\n\n        Build your listing to find the perfect renter — listings with a lot of detail and photos tend to attract the most leads, so don’t be shy! Not sure what to include? Check out our tips and tricks here.\n        <Form>\n          <Segment raised >\n            <Progress percent={progress} success progress />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              name='housename'\n              type='text'\n              label='House Name'\n              placeholder='house name'\n              onChange={handleNameChange}\n            />\n            <Form.Field\n              required\n              id='property type'\n              control={Input}\n              label='Property Type'\n              name='propertytype'\n              placeholder='property type'\n              onChange={handleTypeChange}\n            />\n\n            <Form.Field\n              required\n              id='district'\n              control={Input}\n              label='District'\n              name='district'\n              placeholder='District or Sub City'\n              onChange={handleDestrictChange}\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              label='Sefer'\n              name='sefer'\n              placeholder='Sefer or Village'\n              onChange={handleSeferChange}\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              label='leaseperiod'\n              name='leaseperiod'\n              placeholder='leaseperiod'\n              onChange={handleLeaseperiodChange}\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={TextArea}\n              label='Terms'\n              name='termsandcondition'\n              placeholder='Termsandcondition'\n              onChange={handleTermandConditionChange}\n\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={TextArea}\n              label='Description'\n              name='description'\n              placeholder='House description'\n              onChange={handleDescrptionChange}\n\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              type=\"number\"\n              name='size'\n              label='Square Footage'\n              placeholder='Size of a house'\n              onChange={handleSizeChange}\n              value={size}\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              type=\"number\"\n              name='feepermonth'\n              label='Lease Fee'\n              placeholder='Fee'\n              onChange={handleFeeChange}\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              type=\"number\"\n              name='numberofbeds'\n              label='Number of Beds'\n              placeholder='beds'\n              onChange={handleBedChange}\n            />\n            <Form.Field\n              required\n              control={Input}\n              type=\"file\"\n              name=\"files\"\n              multiple\n              label='Photos of the House'\n              icon='upload'\n              onChange={handleChange}\n            />\n            <Form.Field\n              required\n              id='form-input-control-last-name'\n              control={Input}\n              type=\"file\"\n              name=\"video\"\n              label='Videos about the house'\n              onChange={handleVideoChange}\n\n            />\n\n            <select name=\"available\" id=\"available\" onChange={handleAvailableChange}>\n              <option value=\"false\">No</option>\n              <option value=\"true\">Yes</option>\n            </select>\n            <button onClick={handleUpload}>create upload</button>\n            <button onClick={handleMultipleFileSubmit} disabled={disable}>final Upload</button>\n\n          </Segment>\n        </Form>\n        {/*           {location.loaded ? JSON.stringify(location) : \"not loaded correctly\"}\n */}\n      </Container>\n    </div>\n  );\n}\n\nexport default FileUp\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}